/*
* NetworkControlListener
*
*  Created on: 06.08.2011
*      Author: Endre
*/

#ifndef NETWORKCONTROLLISTENER_
#define NETWORKCONTROLLISTENER_

#include <NetworkListener>

namespace u
{
	/**
	* Network listener for the server control connections.
	* <p>This server object listen for incoming control connections. The
	* connection are only on UNIX sockets allowed. So it doesn't have any
	* real outside network conectivities.
	* </p>
	*/
	class NetworkControlListener : public NetworkListener
	{
		protected:
		public:
			/**
			* Socket file configuration.
			*/
			String socketFile;

			/**
			* Constructor.
			* <p>Create the object and set socketFile to null.</p>
			*/
			NetworkControlListener();
			/**
			* Destructor.
			*/
			~NetworkControlListener();
			/**
			* Name of the class.
			*/
			String className();
			/**
			* Default destroyer.
			*/
			void destroy();

		protected:
			/**
			* Create socket.
			* <p>Create and return the socket for listening.<br>
			* <b>Note:</b> The socket self has not to be in the listener mode.</p>
			* return Socket, setup with all parameter.
			*/
			Socket* createSocket();

			/**
			* Create a control network connection object.
			* <p>This function create and return the network connection object
			* from the accepted incomming connection.
			* </p>
			* @param connection Socket of incoming and accepted connection.
			* @return The network control connection object.
			*/
			NetworkConnection* createIncomingConnection(Socket* connection);
	};
}

#endif /* NETWORKCONTROLLISTENER_ */
