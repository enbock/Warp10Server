/*
 * Control Service
 *
 *  Created on: 28.10.2012
 *      Author: Endre Bock
 */

#ifndef CONTROLSERVICE_
#define CONTROLSERVICE_

#include <NetworkService>
#include <NetworkServiceControlPlugin>

namespace u
{
	/**
	 * Module: Service for control connections.
	 * <p>That is the first module. It handle and implement the behavior for the
	 * control connections between server and admin. This is the server side.
	 * </p>
	 */
	class ControlService : public NetworkService
	{
		protected:
			/**
			 * Control plugin.
			 */
			NetworkServiceControlPlugin *_plugin;

		public:
			/**
			 * Constructor of service.
			 */
			ControlService();

			/**
			 * Destructor of service.
			 */
			~ControlService();

			/**
			 * Destroy with object.
			 */
			void destroy();

			/**
			 * Get the class name of this object.
			 */
			String className();

			/**
			 * Information about this object.
			 */
			String toString();

			/**
			* Enable the room listeners.
			* <p>Add the listeners and send a plugin registration.</p>
			*/
			void addListeners();

			/**
			* Disable the room listeners.
			* <p>Removed the listeners from the room.</p>
			*/
			void removeListeners();

		protected:

			/**
			 * Getting of ctrl listener failed.
			 * @param arg The event object.
			 */
			void onListenerFailed(Object *arg);

			/**
			 * Plugin was registered.
			 * @param arg The event object.
			 */
			void onPluginRegistered(Object *arg);

			/**
			 * New data on control connection.
			 *
			 * @param arg The event object.
			 */
			void onNewData(Object *arg);
	};
}

#endif /* CONTROLSERVICE_ */
